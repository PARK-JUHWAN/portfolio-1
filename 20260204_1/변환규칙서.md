# Sapphire 변환 규칙서

**목적:** `sapphire_index_원본.txt` → `sapphire_index.html` 변환에 적용된 규칙 정리  
**용도:** 서브페이지(`subpage_병원소개.txt`, `subpage_관절센터.txt`, `subpage_척추센터.txt`) 변환 시 동일 기준 적용

---

## 1. 플랫폼 종속 코드 전면 제거

### 제거 대상

| 구분 | 원본 예시 | 처리 |
|------|----------|------|
| imweb CSS | `vendor-cdn.imweb.me/minify_css/...` 등 20+ 라인 | 전부 삭제 |
| imweb JS | `vendor-cdn.imweb.me/js/...`, `site.js`, `function.js` | 전부 삭제 |
| imweb 위젯 시스템 | `data-widget-type="text"`, `data-widget-type="image"` | 전부 삭제 |
| imweb 클래스명 | `doz_sys`, `section_wrap`, `col-dz-*`, `op`, `widget` | 전부 삭제 |
| CRM/분석 | `crmService.boot(...)`, Google Analytics, 방문자 추적 | 전부 삭제 |
| 이메일 보호 | Cloudflare `email-decode.min.js` | 삭제 |
| IE 대응 | `<!--[if lte IE 9]>` 조건부 CSS | 삭제 |
| YouTube/외부 SDK | `www-widgetapi.js` 등 불필요한 외부 스크립트 | 삭제 |
| lightGallery | 이미지 갤러리 라이브러리 (서브페이지에서도 제거) | 삭제 |
| 장바구니/쇼핑 | `/shop/load_change_password.cm` 등 | 삭제 |

### 핵심 원칙
> **imweb 도메인(`imweb.me`, `vendor-cdn.imweb.me`)이 포함된 모든 라인은 삭제한다.**

---

## 2. 코드 규모 압축

| 항목 | 원본 | 변환 후 |
|------|------|---------|
| 총 줄 수 | ~18,800줄 | ~435줄 |
| inline style | 수백 줄 산재 | 0줄 (외부 CSS로) |
| inline script | 수천 줄 | 0줄 (외부 JS로) |
| CSS 파일 | 20+ 외부 링크 | `sapphire_style.css` 1개 |
| JS 파일 | 10+ 외부 스크립트 | `sapphire_main.js` 1개 |

---

## 3. 허용된 외부 라이브러리 (CDN 화이트리스트)

변환 후 허용되는 CDN은 **이것뿐**:

```html
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

<!-- CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

<!-- 커스텀 -->
<link rel="stylesheet" href="sapphire_style.css">
<script src="sapphire_main.js"></script>
```

> 서브페이지에서도 동일한 head를 사용한다. Owl Carousel은 슬라이더 없는 페이지에서도 일단 포함 (통일성).

---

## 4. HTML 구조 변환 (클래스명 체계)

### imweb 클래스 → BEM 클래스 매핑

| 원본 (imweb) | 변환 후 (Sapphire BEM) |
|-------------|----------------------|
| `#doz_header_wrap` | `.header` |
| `.gnb_menu` | `.header__nav` |
| `.gnb_sub_menu` | `.header__dropdown` |
| `.section_wrap` | `.section-block` |
| `.section_inner` / `.op` | `.container` |
| `col-dz-6` | `.col.col-6` |
| `col-dz-4` | `.col.col-4` |
| `col-dz-3` | `.col.col-3` |
| `col-dz-5` / `col-dz-7` 등 | 가장 가까운 `.col-6` 또는 `.col-4`로 정규화 |
| `.widget.text` | `<h2>`, `<p>` 등 시맨틱 태그로 직접 변환 |
| `.widget.image` | `<img>` 직접 삽입 |
| `.widget.button` | `.btn.btn--primary` |
| `.visual_section` | `.hero` |
| `.footer_wrap` | `.footer` |

### 핵심 원칙
> **imweb의 `section_wrap > section_inner > op > row > col-dz-*` 구조를  
> Sapphire의 `.section-block > .container > .row > .col.col-*` 구조로 변환한다.**

---

## 5. 네비게이션 축소 (6개 → 4개)

### 원본 (6개)
```
병원소개 | 관절센터 | 척추센터 | 족부센터 | 스포츠 재활센터 | 운동선수센터
```

### 변환 후 (4개, 드롭다운 포함)
```
병원소개 ▾ | 관절센터 | 척추센터 | 스포츠 재활센터
  ├ 병원소개
  ├ 의료진
  └ 시설안내
```

### 변경 내역
| 원본 메뉴 | 처리 |
|----------|------|
| 병원소개 | **드롭다운**으로 변환 (하위: 병원소개/의료진/시설안내) |
| 관절센터 | 유지 |
| 척추센터 | 유지 |
| 족부센터 | **삭제** (Sapphire는 관절/척추/스포츠재활 특화) |
| 스포츠 재활센터 | 유지 |
| 운동선수센터 | **삭제** (스포츠 재활센터에 흡수) |

### 모바일 nav도 동일 구조 (아코디언)
```html
<li class="mobile-nav__item mobile-nav__item--accordion">
  <a href="#" class="mobile-nav__link mobile-nav__accordion-toggle">병원소개 <span class="accordion-arrow">▾</span></a>
  <ul class="mobile-nav__submenu">
    <li><a href="..." class="mobile-nav__sublink">병원소개</a></li>
    <li><a href="..." class="mobile-nav__sublink">의료진</a></li>
    <li><a href="..." class="mobile-nav__sublink">시설안내</a></li>
  </ul>
</li>
```

---

## 6. 푸터 축소 (4컬럼 → 3컬럼)

### 원본 (4컬럼)
```
로고+SNS | 진료센터(4개) | 병원안내(4개) | 연락처
           관절센터         병원소개
           척추센터         의료진
           족부센터         시설안내
           스포츠재활센터   오시는 길
```

### 변환 후 (3컬럼)
```
로고+SNS | 진료센터(3개) | 연락처
           관절센터         전화/팩스/이메일/주소
           척추센터
           스포츠 재활센터
```

### 변경 내역
- **병원안내 컬럼**: 전체 삭제
- **진료센터**: 족부센터 삭제 (3개만)
- CSS: `grid-template-columns: repeat(4, 1fr)` → `repeat(3, 1fr)`

---

## 7. 링크 체계 변환

### 원본: 외부 URL (imweb 경로)
```html
<a href="/fourofforthopedic">병원소개</a>
<a href="/joint-center">관절센터</a>
<a href="/SpineCenter">척추센터</a>
<a href="/Foot_Ankle_Center_Guide">족부센터</a>
<a href="/sportsrehab">스포츠 재활센터</a>
```

### 변환 후: 앵커 링크 (원페이지 기준)
```html
<a href="#intro">병원소개</a>
<a href="#departments">관절센터</a>
<a href="#departments">척추센터</a>
<a href="#departments">스포츠 재활센터</a>
```

### 서브페이지 전환 시 (향후)
```html
<a href="sapphire_about.html">병원소개</a>
<a href="sapphire_joint.html">관절센터</a>
<a href="sapphire_spine.html">척추센터</a>
<a href="sapphire_sports.html">스포츠 재활센터</a>
```

---

## 8. 템플릿 변수 시스템 (`{{placeholder}}`)

### 원칙
- 하드코딩된 텍스트를 `{{변수명}}`으로 치환
- `config.json`에서 값을 관리
- 이미지 경로는 하드코딩 유지 (이미지는 변수화하지 않음)

### 변수화 대상 vs 비대상

| 변수화 O | 변수화 X |
|----------|----------|
| 병원명 | HTML 구조/태그 |
| 전화번호, 주소 등 연락처 | 이미지 파일 경로 |
| 메타 태그 내용 (description, keywords) | CSS 클래스명 |
| 히어로 슬라이드 텍스트 | 섹션 영문 subtitle ("About Us" 등) |
| 의사 이름/전공/설명 | 네비게이션 구조 |
| 시설 이름/설명 | |
| 진료과 이름/설명 | |

### 서브페이지 적용 시 추가 변수 예상
```
{{about_hero_title}}     ← 서브페이지 히어로 타이틀
{{about_section_1_text}} ← 본문 텍스트
{{joint_disease_1_name}} ← 질환명
{{joint_disease_1_desc}} ← 질환 설명
```

---

## 9. 이미지 처리

### 원본: imweb CDN 이미지
```html
<img src="https://cdn.imweb.me/upload/S2025.../abc123.png">
```

### 변환 후: 로컬 에셋 + 네이밍 규칙
```html
<img src="sapphire_assets/sapphire_hero_1_1920x800.png">
```

### 네이밍 규칙
```
sapphire_{설명}_{번호}_{가로}x{세로}.png
```

| 카테고리 | 예시 |
|----------|------|
| 히어로 | `sapphire_hero_1_1920x800.png` |
| 의사 | `sapphire_doctor_1_400x500.png` |
| 시설 | `sapphire_surgery_1_800x600.png` |
| 아이콘 | `sapphire_knee_1_400x400.png` |
| 로고 | `sapphire_logo_1_200x60.png` |
| 소형 아이콘 | `sapphire_clock_1_64x64.png` |

### 서브페이지 이미지 추가 시
```
sapphire_about_hero_1_1920x400.png     ← 서브페이지 히어로
sapphire_about_gallery_1_800x600.png   ← 서브페이지 갤러리
sapphire_joint_diagram_1_600x400.png   ← 질환 도해
```

---

## 10. 메타 태그 표준화

### 원본: 중복/불필요 메타 다수
- `og:title` 2번 중복
- `description` 2번 중복
- `naver-site-verification` (윈윈정형외과 소유)
- `google-site-verification` (윈윈정형외과 소유)

### 변환 후: 깔끔한 표준 세트
```html
<!-- 기본 -->
<title>{{hospital_name}}</title>
<meta name="description" content="{{meta_description}}">
<meta name="keywords" content="{{meta_keywords}}">

<!-- OG (1회만) -->
<meta property="og:title" content="{{hospital_name}} | {{meta_subtitle}}">
<meta property="og:description" content="{{meta_description}}">

<!-- Twitter (1회만) -->
<meta name="twitter:title" content="...">

<!-- Schema.org (1회만) -->
<meta itemprop="name" content="...">

<!-- Nate (1회만) -->
<meta name="nate:title" content="...">

<!-- JSON-LD 구조화 데이터 (원본에 없던 것, 신규 추가) -->
<script type="application/ld+json">{ "@type": "Hospital", ... }</script>
```

### 제거 대상
- `naver-site-verification` (다른 사이트 소유)
- `google-site-verification` (다른 사이트 소유)
- 중복된 og/description 태그

---

## 11. 섹션별 콘텐츠 구조 변환

### 메인 페이지 섹션 맵핑

| 순서 | 원본 (imweb) | 변환 후 (Sapphire) | 비고 |
|------|-------------|-------------------|------|
| 1 | 헤더 (overlay, 6메뉴) | `.header` (4메뉴 + dropdown) | 축소 |
| 2 | 비주얼 섹션 (배경이미지) | `.hero` (Owl Carousel 3장) | 슬라이더화 |
| 3 | 소개 섹션 (2컬럼: 이미지+텍스트) | `#intro` (2컬럼: 이미지+텍스트) | 구조 유지 |
| 4 | 의료진 섹션 (반복 카드) | `#doctors` (3열 카드) | 단순화 |
| 5 | 갤러리 (owl-carousel) | `#facilities` (3열 오버레이 카드) | 용도 변환 |
| 6 | - | `#departments` (4열 아이콘 카드) | **신규 추가** |
| 7 | - | `#location` (지도 + 3열 정보) | **신규 추가** |
| 8 | 푸터 (4컬럼) | `.footer` (3컬럼) | 축소 |

### 서브페이지 섹션 패턴 (3종)

| 패턴 | 대상 페이지 | 구조 |
|------|-----------|------|
| 패턴1: 소개형 | `about.html` | 히어로배너 → 2컬럼(이미지+텍스트) → 갤러리 |
| 패턴2: 카드그리드형 | `doctors.html`, `facilities.html` | 히어로배너 → 카드 반복 |
| 패턴3: 센터상세형 | `joint.html`, `spine.html`, `sports.html` | 히어로배너 → 질환카드 → 치료방법 → CTA |

---

## 12. 반응형 브레이크포인트

| 브레이크포인트 | 대상 | 주요 변경 |
|--------------|------|----------|
| 991px↓ | 태블릿 | nav → 햄버거, 폰트 축소, footer 2컬럼 |
| 768px↓ | 모바일 가로 | padding 축소, 카드 이미지 높이 축소 |
| 767px↓ | 모바일 세로 | `col-6/4/3` → `width:100%`, footer 1컬럼, hero 500px |

---

## 13. 애니메이션 변환

### 원본: imweb fadeInUp
```html
<div class="animated" data-animation="fadeInUp" data-animation-delay="0.7s">
```

### 변환 후: 커스텀 fade-in (JS + CSS)
```html
<div class="fade-in" data-delay="200">
```

| 클래스 | 방향 |
|--------|------|
| `.fade-in` | 아래→위 |
| `.fade-in-left` | 왼쪽→오른쪽 |
| `.fade-in-right` | 오른쪽→왼쪽 |

JS(`sapphire_main.js`)의 `ScrollAnimations` 모듈이 스크롤 시 `.visible` 추가.

---

## 14. 서브페이지 변환 시 공통 적용 사항

### 각 서브페이지 공통 구조
```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- 메인과 동일한 head (meta + CDN + sapphire_style.css) -->
  <!-- title과 description만 페이지별로 변경 -->
</head>
<body>
  <!-- 헤더: 메인과 100% 동일 (복사 붙여넣기) -->
  <header class="header header--transparent">...</header>
  <nav class="mobile-nav">...</nav>

  <!-- 서브페이지 히어로 배너 (메인 hero보다 작음) -->
  <section class="subpage-hero">
    <h1>{{page_title}}</h1>
    <p>{{page_subtitle}}</p>
  </section>

  <!-- 본문 (패턴 1/2/3 중 하나) -->
  <section class="section-block">
    ...콘텐츠...
  </section>

  <!-- 푸터: 메인과 100% 동일 (복사 붙여넣기) -->
  <footer class="footer">...</footer>

  <!-- JS: 메인과 동일 -->
</body>
</html>
```

### 원본 서브페이지에서 추출할 것
1. **콘텐츠 구조**: 어떤 섹션이 어떤 순서로 배치되는지
2. **2컬럼 비율**: `col-dz-5+7`인지 `col-dz-6+6`인지 → `col-6+col-6` 또는 `col-4+col-8`로 변환
3. **텍스트 내용**: 제목/본문/리스트 → `{{변수}}`화 대상 파악
4. **이미지 개수/크기**: 네이밍 규칙 적용

### 원본 서브페이지에서 무시할 것
1. imweb 전체 CSS/JS (위 규칙 1번)
2. 헤더/푸터 (메인에서 복사)
3. 모든 inline style
4. `data-widget-*` 속성
5. `section_wrap`, `section_inner`, `op` 등 imweb 래퍼
6. lightGallery, 모달 등 복잡한 인터랙션
7. owl-carousel (갤러리) → 정적 이미지 그리드로 변환

---

## 요약: 변환 체크리스트 (서브페이지용)

```
□ imweb 도메인 코드 전부 제거
□ head를 Sapphire 표준 head로 교체 (title/description만 변경)
□ header/footer를 메인에서 복사
□ nav 링크를 서브페이지 경로로 변경 (sapphire_about.html 등)
□ 본문 구조를 section-block > container > row > col 패턴으로 변환
□ col-dz-* → col-6/col-4/col-3 정규화
□ 텍스트를 {{변수}}로 치환 (또는 placeholder 텍스트)
□ 이미지를 sapphire_assets/sapphire_{설명}_{번호}_{크기}.png 로 변환
□ 애니메이션을 fade-in 클래스로 통일
□ 반응형: 767px 이하에서 모든 col → width:100%
□ 불필요한 섹션 삭제 (족부센터, 운동선수센터 관련)
```
